@model IEnumerable<AutoService.WEB.Models.Service>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2 class="display-4">Услуги</h2>
<div id="modDialog" class="modal fade">
    <div id="dialogContent" class="modal-dialog"></div>
</div>

<nav class="navbar navbar-expand-lg navbar-light">
    <ul class="navbar-nav">
        <li class="nav-item">
            @Html.ActionLink("По имени", "Index", new { sortOrder = @ViewBag.NameSort }, new { @class = "nav-link" })
        </li>
        <li class="nav-item">
            @Html.ActionLink("По цене", "Index", new { sortOrder = @ViewBag.PriceSort }, new { @class = "nav-link" })
        </li>
        <li class="nav-item">
            @Html.ActionLink("По наличию акции", "Index", new { sortOrder = @ViewBag.DiscountSort }, new { @class = "nav-link" })
        </li>
        <li class="nav-item">
            @Html.ActionLink("Все", "Index", null, new { @class = "nav-link" })
        </li>
    </ul>
    @using (Ajax.BeginForm("SearchServicesByName", null, new AjaxOptions { UpdateTargetId = "results" }, new { @class = " ml-auto form-inline" }))
    {
        <input type="text" class="form-control" placeholder="Поиск по услуге" aria-describedby="button" name="serviceName">
        <div class="input-group-append">
            <button class="btn btn-outline-dark" type="submit" id="button">Поиск</button>
        </div>
    }
</nav>

<div class=" row  row-cols-xl-4 row-cols-md-1 mb-4" id="results">
    @foreach (var service in Model)
    {
        @Html.Partial("ServiceView", service)
    }
</div>
@if (User.IsInRole("Admin"))
{
    <div class="mb-2 mt-2">
        <a class=" btn btn-dark" href="/Services/Create">Добавить</a>
    </div>
}

@section scripts
{
    @Scripts.Render("~/scripts/InvokeModalDialog.js")
    @Scripts.Render("~/scripts/jquery-3.4.1.min.js")
    @Scripts.Render("~/scripts/jquery.unobtrusive-ajax.min.js")
}