@using AutoService.WEB.Models
@model ServiceView

<div class="col-xl-3 col-md-5 col-sm-10 mt-2 mb-2">
    <div class="card h-100 shadow-sm rounded mx-auto" style="max-height:400px;max-width:400px">
        <img class="card-img h-50" src="@Model.ServiceImageHref" alt="...">
        <div class="card-body text-center p-1"style="min-height:100px">
            <div class="h5 m-1 p-1" style="min-height:40px">
                @if (Model.Discount == null)
                {
                    @Model.ServiceName
                }
                else if (Model.Discount.isRelevant())
                {
                    if (Model.Discount.Value <= 30)
                    {
                        @Model.ServiceName <span class="badge badge-success">-@Model.Discount.Value%</span>
                    }
                    else if (Model.Discount.Value > 30 && Model.Discount.Value < 60)
                    {
                        @Model.ServiceName <span class="badge badge-warning">-@Model.Discount.Value%</span>
                    }
                    else
                    {
                        @Model.ServiceName <span class="badge badge-danger">-@Model.Discount.Value%</span>
                    }
                }
                else
                {
                    @Model.ServiceName
                }
            </div>
            <div class="card-text">
                @if (Model.Discount != null && Model.Discount.isRelevant())
                {
                    <div>Цена: @Model.PriceWithDiscount <i class="fa fa-ruble p-1"></i></div>
                }
                else
                {
                    <div>Цена: @Model.Price <i class="fa fa-ruble p-1"></i></div>
                }
            </div>
        </div>
        <div class="card-footer text-center">
            @if (User.IsInRole("Admin"))
            {
                <a href="@Url.Action("Delete","Services", new { @Model.ServiceId })" class="m-1 dialog btn btn-dark">
                    <i class="fa fa-trash mr-1 p-1"></i>Удалить
                </a>
                <a href="@Url.Action("Edit","Services", new { @Model.ServiceId })" class="m-1 dialog btn btn-dark">
                    <i class="fa fa-gear mr-1 p-1"></i>Изменить
                </a>
            }
            else if (User.Identity.IsAuthenticated)
            {
                <a class="dialog btn btn-dark btn-sm addToCart" href="@Url.Action("AddToCart","ShopCart",new { serviceId = Model.ServiceId })" title="Добавить в корзину">
                    <i class="fa fa-shopping-cart"></i>+
                </a>
            }
        </div>
    </div>
</div>